/// Утилиты для работы с кешем изображений
///
/// Предоставляет функции для очистки кеша изображений Flutter
/// и получения информации о размере кеша.
library;

import 'package:flutter/material.dart';

/// Утилиты для управления кешем изображений Flutter
class CacheUtils {
  /// Очищает кеш изображений Flutter
  ///
  /// Удаляет все закешированные изображения и живые изображения из памяти.
  /// Используется при переключении аккаунтов или для освобождения памяти.
  static void clearImageCache() {
    try {
      imageCache.clear();
      imageCache.clearLiveImages();
    } catch (e) {
      // Handle error silently
    }
  }

  /// Получает размер кеша в читаемом формате
  ///
  /// Возвращает: Строку с примерной оценкой размера кеша в KB
  /// Примечание: Flutter не предоставляет прямой доступ к точному размеру кеша,
  /// поэтому используется приблизительная оценка на основе количества изображений.
  static String getCacheSize() {
    return 'Размер кеша: ~${(imageCache.liveImageCount * 100 / 1024).toStringAsFixed(1)} KB';
  }
}
