import '../models/auth_user.dart';

/// Интерфейс репозитория для операций аутентификации
///
/// Определяет контракт для всех операций связанных с аутентификацией пользователей.
/// Реализации этого интерфейса обеспечивают безопасность и консистентность операций.
abstract class AuthRepository {
  /// Проверяет текущую сессию аутентификации
  ///
  /// Returns: объект AuthUser если сессия активна, null в противном случае
  Future<AuthUser?> checkAuth();

  /// Выполняет вход пользователя в систему
  ///
  /// [email] - email или имя пользователя
  /// [password] - пароль пользователя
  /// Returns: результат операции с данными сессии или ошибкой
  Future<Map<String, dynamic>> login(String email, String password);

  /// Выполняет вход с дополнительными деталями
  ///
  /// Аналогично login(), но возвращает расширенную информацию включая
  /// необходимость настройки профиля и chat ID.
  ///
  /// [email] - email или имя пользователя
  /// [password] - пароль пользователя
  /// Returns: расширенный результат входа с дополнительными полями
  Future<Map<String, dynamic>> loginWithDetails(String email, String password);

  /// Регистрирует нового пользователя в системе
  ///
  /// [username] - уникальное имя пользователя
  /// [email] - email адрес
  /// [password] - пароль пользователя
  /// [name] - отображаемое имя (опционально)
  /// Returns: результат регистрации с сообщением об успехе или ошибке
  Future<Map<String, dynamic>> register(String username, String email, String password, String name);

  /// Активирует профиль пользователя после регистрации
  ///
  /// Отправляет пустой POST запрос с сессионным ключом для завершения настройки профиля.
  /// Returns: true если активация успешна, false в противном случае
  Future<bool> registerProfile();

  /// Выполняет выход пользователя из системы
  ///
  /// Очищает все сессионные данные, настройки персонализации,
  /// кэш изображений и данные BLoC состояний для полной очистки.
  Future<void> logout();
}
